"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[729],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=o,b=p["".concat(l,".").concat(m)]||p[m]||c[m]||r;return n?a.createElement(b,i(i({ref:t},d),{},{components:n})):a.createElement(b,i({ref:t},d))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var u=2;u<r;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},7276:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>u});var a=n(7462),o=(n(7294),n(3905));const r={sidebar_position:1},i="Setting up MongoDB",s={unversionedId:"advanced/database/setting-up-mongodb",id:"advanced/database/setting-up-mongodb",title:"Setting up MongoDB",description:"Install the MongoDB on your server/PC following this tutorial.",source:"@site/docs/05-advanced/01-database/01-setting-up-mongodb.md",sourceDirName:"05-advanced/01-database",slug:"/advanced/database/setting-up-mongodb",permalink:"/arcybot/docs/advanced/database/setting-up-mongodb",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Using a database",permalink:"/arcybot/docs/category/using-a-database"},next:{title:"Creating database bot account",permalink:"/arcybot/docs/advanced/database/database-bot-account"}},l={},u=[{value:"Securing your database",id:"securing-your-database",level:3}],d={toc:u};function c(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"setting-up-mongodb"},"Setting up MongoDB"),(0,o.kt)("p",null,"Install the MongoDB on your server/PC following ",(0,o.kt)("a",{parentName:"p",href:"https://docs.mongodb.com/manual/installation/#mongodb-community-edition-installation-tutorials"},"this tutorial"),"."),(0,o.kt)("p",null,"After it's installed, you need to run a Mongo Daemon so it keeps working in the background. Mongo runs on port ",(0,o.kt)("inlineCode",{parentName:"p"},"27017")," by default, but its worth to choose some other port to protect your database from the attacks that scan for unprotected default database ports. Decide on a port you want to run your database on or stay with the default 27017."),(0,o.kt)("p",null,"To start the Mongo Daemon, use the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"mongod --auth --fork --port YOUR_MONGO_PORT --bind_ip 0.0.0.0 --dbpath /var/lib/mongodb --logpath /var/lib/mongod.log\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"--bind_ip 0.0.0.0")," allows the remote clients to connect to your database. It is useful if your database runs on different machine than your bot. You can remove that part if you host both the bot and the database on the same machine."),(0,o.kt)("h3",{id:"securing-your-database"},"Securing your database"),(0,o.kt)("p",null,"You can skip this section if you want to inevitably get hacked."),(0,o.kt)("p",null,"Mongo database is created without any authentication method, therefore to keep your database secure you should start from creating an administrator account."),(0,o.kt)("p",null,"The Administrator should be added to the ",(0,o.kt)("inlineCode",{parentName:"p"},"admin")," database. To do so, use the following commands:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"mongo --port YOUR_MONGO_PORT")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"use admin")," (this switches you to ",(0,o.kt)("inlineCode",{parentName:"li"},"admin")," database)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},'db.createUser(\n    {\n        user: "YOUR_ADMIN_USERNAME",\n        pwd: "YOUR_ADMIN_PASSWORD",\n        roles: [ "root" ]\n    }\n)\n')))),(0,o.kt)("p",null,"Voila! Your database now has an admin account. Now whenever you want to perform any administrative actions, you have to use the following command beforehand:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},'db.auth({"login": "YOUR_ADMIN_USERNAME", "pwd": "YOUR_ADMIN_PASSWORD"})')))}c.isMDXComponent=!0}}]);